/* ==========================================================
   Design-Token Layer (auto-generated from Figma Tokens)
   ========================================================== */
@import "tokens.css";          /* color, space, radius, motion tokens */
@import "fonts.css";           /* Inter var + Lora, subset preloaded */

/* ==========================================================
   Reset & Base
   ========================================================== */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{color-scheme:light dark;font-family:var(--font-sans);font-size:100%;line-height:1.6}
body{background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased}
#root{display:flex;flex-direction:column;min-height:100vh}

/* ==========================================================
   Fluid Type Scale (clamp)
   ========================================================== */
h1{font-size:var(--step-5);line-height:1.2}
h2{font-size:var(--step-4);margin-block:var(--space-xl) var(--space-md)}
h3{font-size:var(--step-3);margin-block:var(--space-lg) var(--space-sm)}
h4{font-size:var(--step-2)}
p,li,span{color:var(--text)}
em{color:var(--text-muted);font-style:italic}
strong{color:var(--accent);font-weight:600}
a{color:var(--link);text-decoration:none;transition:color .2s}
a:hover,a:focus-visible{color:var(--link-hover);text-decoration:underline}

/* ==========================================================
   Focus Ring (consistent everywhere)
   ========================================================== */
:focus-visible{outline:2px solid var(--focus);outline-offset:2px}

/* ==========================================================
   Button System (primary, secondary, ghost, icon)
   ========================================================== */
.btn{
  --_bg:var(--btn-bg,var(--secondary));
  --_clr:var(--btn-clr,var(--header-text));
  display:inline-flex;align-items:center;justify-content:center;
  gap:var(--space-xs);
  padding:var(--space-sm) var(--space-md);
  font-size:var(--step--1);
  font-weight:500;
  border:none;
  border-radius:var(--radius-md);
  background:var(--_bg);
  color:var(--_clr);
  cursor:pointer;
  transition:transform .1s,background .2s,box-shadow .2s;
}
.btn:disabled{opacity:.5;cursor:not-allowed}
.btn:hover:not(:disabled){box-shadow:var(--shadow-sm)}
.btn:active{transform:scale(.97)}
.btn-primary{--btn-bg:var(--accent);--btn-clr:#fff}
.btn-ghost{background:transparent;color:var(--text-muted)}
.btn-icon{padding:var(--space-sm);border-radius:var(--radius-full)}

/* ==========================================================
   Header
   ========================================================== */
.main-header{
  position:fixed;inset:0 0 auto;
  display:flex;align-items:center;justify-content:space-between;
  padding:var(--space-md) var(--space-lg);
  background:var(--primary);color:var(--header-text);
  z-index:var(--z-header);
  box-shadow:var(--shadow-sm);
}
.header-content h1{font-size:var(--step-1);color:inherit}
.streak-indicator{display:flex;align-items:center;gap:var(--space-2xs);font-weight:600;color:var(--streak)}

/* ==========================================================
   Sidebar
   ========================================================== */
.sidebar{
  --_w:280px;
  position:relative;
  width:var(--_w);
  background:var(--sidebar-bg);
  border-right:1px solid var(--border);
  padding:var(--space-md);
  transition:width .3s var(--ease-spring);
  overflow-y:auto;
}
.sidebar-title{
  font-size:var(--step--1);
  font-weight:600;
  color:var(--text-muted);
  text-transform:uppercase;
  letter-spacing:.05em;
  margin-block-end:var(--space-md);
}
.day-nav{display:flex;flex-direction:column;gap:var(--space-2xs)}
.day-button{
  --_bg:transparent;
  display:flex;align-items:center;width:100%;
  padding:var(--space-sm);
  font-size:var(--step--1);
  background:var(--_bg);
  border-radius:var(--radius-sm);
  transition:background .2s;
}
.day-button:hover:not(:disabled){--_bg:var(--bg-hover)}
.day-button.active{--_bg:var(--bg-subtle);font-weight:600}
.day-button.active::before{
  content:'';
  position:absolute;inset:0 auto 0 -1rem;
  width:3px;background:var(--accent);border-radius:0 var(--radius-xs) var(--radius-xs) 0
}
.day-number{
  width:24px;height:24px;
  display:grid;place-items:center;
  border:1px solid var(--border);
  border-radius:var(--radius-full);
  font-size:var(--step--2);
  margin-inline-end:var(--space-sm)
}
.day-button.completed .day-number{background:var(--success);border-color:var(--success);color:#fff}
.day-button.locked{opacity:.5;cursor:not-allowed}

/* Sidebar Toggle (mobile) */
.sidebar-toggle{
  display:none;position:absolute;inset:1rem -1rem auto auto;
  width:24px;height:24px;background:var(--sidebar-bg);border:1px solid var(--border);
  border-radius:var(--radius-full);box-shadow:var(--shadow-md);z-index:10
}
@media(max-width:1024px){
  .sidebar{position:fixed;inset:0 auto 0 0;z-index:var(--z-sidebar);
           transform:translateX(-100%);transition:transform .3s var(--ease-out)}
  .sidebar.open{transform:translateX(0)}
  .sidebar-toggle{display:flex}
}

/* ==========================================================
   Chat Surface
   ========================================================== */
.chat{
  display:flex;flex-direction:column;height:100%;
  background:var(--surface);border-radius:var(--radius-lg);
  box-shadow:var(--shadow-md)
}
.chat-messages{
  flex:1;overflow-y:auto;
  padding:var(--space-md);
  scroll-behavior:smooth;
}
.chat-bubble{
  --_bg:var(--ai-message-bg);
  max-width:80%;
  padding:var(--space-sm) var(--space-md);
  border-radius:var(--radius-md);
  background:var(--_bg);
  animation:fadeIn .3s;
}
.chat-bubble.user{--_bg:var(--user-message-bg);align-self:flex-end;border-top-right-radius:0}
.chat-bubble.ai{border-top-left-radius:0}
.chat-input{display:flex;gap:var(--space-sm);padding:var(--space-md)}
.chat-input input{flex:1;border:1px solid var(--border);border-radius:var(--radius-md);padding:var(--space-sm) var(--space-md);background:var(--input-bg)}
.chat-input button{flex-shrink:0}

/* ==========================================================
   Modals
   ========================================================== */
.modal-backdrop{
  position:fixed;inset:0;
  background:rgb(0 0 0 / .5);
  backdrop-filter:blur(2px);
  z-index:var(--z-modal);
  animation:fadeIn .3s
}
.modal{
  position:fixed;inset:auto;
  width:min(90vw,500px);
  max-height:80vh;
  background:var(--surface);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  box-shadow:var(--shadow-xl);
  animation:slideUp .4s var(--ease-out);
}
.modal-close{position:absolute;top:var(--space-sm);right:var(--space-sm);background:none;border:none;font-size:1.5rem;cursor:pointer}

/* ==========================================================
   Utility Animations
   ========================================================== */
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:none;opacity:1}}

/* ==========================================================
   Responsive Grid
   ========================================================== */
@media(min-width:1024px){
  .layout{display:grid;grid-template-columns:280px 1fr 450px;gap:var(--space-xl);height:calc(100vh - 80px)}
  .sidebar{position:static;transform:none}
  .day-exercise{position:sticky;top:calc(80px + var(--space-lg))}
}